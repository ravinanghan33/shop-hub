import{j as e,C as z,B as n,a6 as U,h as X,N as S,a7 as H,a8 as q,K as D,a as G,T as a,a9 as Q,q as b,b as Z,G as l,u as ee,aa as te,ab as se,ac as re,ad as ae,ae as O,a4 as B,af as ie,ag as ne,g as oe,F as le,n as ce,M as P,S as w,J as de,a5 as N,ah as xe,ai as A,Z as $,a2 as he,l as ue,E as me}from"./ui-vendor-Ci4yzqLt.js";import{b as E,u as J,e as je,a as u,f as ge}from"./react-vendor-Ch971XjU.js";import{f as K,P as pe,u as V,a as fe}from"./admin-CwDw5-Mt.js";import{u as Y,E as be}from"./cart-_VHBH9rT.js";const R=E.memo(({product:i})=>{const{addToCart:c,isInCart:r}=Y(),g=J(),[h,p]=E.useState(!1),y=x=>{x.stopPropagation(),c(i)},m=()=>{g(`/product/${i.id}`)},j=x=>{x.stopPropagation(),p(!h)};return e.jsxs(z,{sx:{height:"100%",display:"flex",flexDirection:"column",cursor:"pointer",transition:"transform 0.2s","&:hover":{transform:"translateY(-4px)"}},onClick:m,children:[e.jsxs(n,{sx:{position:"relative"},children:[e.jsx(U,{component:"img",height:"240",image:i.image,alt:i.title,sx:{objectFit:"contain",p:4,backgroundColor:"background.paper"}}),e.jsx(X,{title:h?"Remove from Favorites":"Add to Favorites",children:e.jsx(S,{sx:{position:"absolute",top:8,right:8,backgroundColor:"background.paper","&:hover":{backgroundColor:"background.paper"}},onClick:j,size:"small",children:h?e.jsx(H,{color:"error"}):e.jsx(q,{})})}),e.jsx(D,{label:i.category,size:"small",sx:{position:"absolute",top:8,left:8,textTransform:"capitalize"}})]}),e.jsxs(G,{sx:{flexGrow:1,display:"flex",flexDirection:"column",gap:1},children:[e.jsx(a,{variant:"h6",component:"h3",sx:{fontSize:"1rem",fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",minHeight:"3em"},children:i.title}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Q,{value:i.rating.rate,precision:.1,size:"small",readOnly:!0}),e.jsxs(a,{variant:"body2",color:"text.secondary",children:["(",i.rating.count,")"]})]}),e.jsx(a,{variant:"h5",color:"primary",sx:{fontWeight:700,mt:"auto"},children:K(i.price)}),e.jsx(b,{variant:"contained",startIcon:e.jsx(Z,{}),fullWidth:!0,onClick:y,disabled:r(i.id),sx:{mt:1},children:r(i.id)?"In Cart":"Add to Cart"})]})]})});R.displayName="ProductCard";const ye=({products:i,loading:c=!1,skeletonCount:r=8})=>c?e.jsx(l,{container:!0,spacing:3,children:Array.from(new Array(r)).map((g,h)=>e.jsx(l,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(pe,{})},h))}):e.jsx(l,{container:!0,spacing:3,children:i.map(g=>e.jsx(l,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(R,{product:g})},g.id))}),ve=()=>{const{products:i,loading:c}=V(),[r]=je(),g=ee(),h=te(g.breakpoints.down("md")),[p,y]=u.useState("default"),[m,j]=u.useState([]),[x,v]=u.useState([0,1e3]),[C,k]=u.useState(0),[I,f]=u.useState(!1),o=r.get("search")||"",W=u.useMemo(()=>Array.from(new Set(i.map(t=>t.category))),[i]),F=u.useMemo(()=>Math.max(...i.map(t=>t.price),1e3),[i]);u.useEffect(()=>{v([0,F])},[F]);const T=u.useMemo(()=>{let t=[...i];if(o){const s=o.toLowerCase();t=t.filter(d=>d.title.toLowerCase().includes(s)||d.description.toLowerCase().includes(s)||d.category.toLowerCase().includes(s))}switch(m.length>0&&(t=t.filter(s=>m.includes(s.category))),t=t.filter(s=>s.price>=x[0]&&s.price<=x[1]),t=t.filter(s=>s.rating.rate>=C),p){case"price-asc":t.sort((s,d)=>s.price-d.price);break;case"price-desc":t.sort((s,d)=>d.price-s.price);break;case"rating":t.sort((s,d)=>d.rating.rate-s.rating.rate);break;case"name":t.sort((s,d)=>s.title.localeCompare(d.title));break}return t},[i,m,x,C,p,o]),L=t=>{j(s=>s.includes(t)?s.filter(d=>d!==t):[...s,t])},M=()=>{j([]),v([0,F]),k(0),y("default")},_=e.jsxs(n,{sx:{p:3},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(a,{variant:"h6",fontWeight:600,children:"Filters"}),h&&e.jsx(S,{onClick:()=>f(!1),children:e.jsx(se,{})})]}),e.jsxs(n,{sx:{mb:4},children:[e.jsx(a,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Categories"}),W.map(t=>e.jsx(re,{control:e.jsx(ae,{checked:m.includes(t),onChange:()=>L(t)}),label:e.jsx(a,{sx:{textTransform:"capitalize"},children:t})},t))]}),e.jsxs(n,{sx:{mb:4},children:[e.jsx(a,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Price Range"}),e.jsx(O,{value:x,onChange:(t,s)=>v(s),valueLabelDisplay:"auto",min:0,max:F,sx:{mt:2}}),e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:[e.jsxs(a,{variant:"body2",children:["$",x[0]]}),e.jsxs(a,{variant:"body2",children:["$",x[1]]})]})]}),e.jsxs(n,{sx:{mb:4},children:[e.jsx(a,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Minimum Rating"}),e.jsx(O,{value:C,onChange:(t,s)=>k(s),valueLabelDisplay:"auto",min:0,max:5,step:.5,marks:!0,sx:{mt:2}})]}),e.jsx(b,{variant:"outlined",fullWidth:!0,onClick:M,children:"Clear All Filters"})]});return e.jsxs(B,{maxWidth:"xl",sx:{py:4},children:[e.jsxs(n,{sx:{mb:4},children:[e.jsx(a,{variant:"h4",fontWeight:700,gutterBottom:!0,children:o?`Search Results for "${o}"`:"All Products"}),e.jsxs(a,{variant:"body1",color:"text.secondary",children:[T.length," products found"]})]}),e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,md:3,children:h?e.jsxs(e.Fragment,{children:[e.jsx(b,{variant:"outlined",startIcon:e.jsx(ie,{}),fullWidth:!0,onClick:()=>f(!0),sx:{mb:2},children:"Filters"}),e.jsx(ne,{anchor:"left",open:I,onClose:()=>f(!1),children:e.jsx(n,{sx:{width:280},children:_})})]}):e.jsx(oe,{sx:{position:"sticky",top:80},children:_})}),e.jsxs(l,{item:!0,xs:12,md:9,children:[e.jsxs(n,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},children:[e.jsx(n,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:m.map(t=>e.jsx(D,{label:t,onDelete:()=>L(t),sx:{textTransform:"capitalize"}},t))}),e.jsx(le,{size:"small",sx:{minWidth:200},children:e.jsxs(ce,{value:p,onChange:t=>y(t.target.value),children:[e.jsx(P,{value:"default",children:"Default"}),e.jsx(P,{value:"price-asc",children:"Price: Low to High"}),e.jsx(P,{value:"price-desc",children:"Price: High to Low"}),e.jsx(P,{value:"rating",children:"Top Rated"}),e.jsx(P,{value:"name",children:"Name: A to Z"})]})})]}),T.length===0&&!c?e.jsx(be,{title:"No products found",description:"Try adjusting your filters or search query",actionLabel:"Clear Filters",onAction:M}):e.jsx(ye,{products:T,loading:c,skeletonCount:8})]})]})]})},We=Object.freeze(Object.defineProperty({__proto__:null,ProductsPage:ve},Symbol.toStringTag,{value:"Module"})),Ce=()=>{const{id:i}=ge(),c=J(),{product:r,loading:g,error:h}=fe(Number(i)),{products:p}=V(),{addToCart:y,isInCart:m}=Y(),[j,x]=u.useState(1),[v,C]=u.useState(!1),k=p.filter(o=>o.category===r?.category&&o.id!==r?.id).slice(0,4),I=()=>{r&&y(r,j)},f=o=>{o>=1&&x(o)};return g?e.jsx(B,{maxWidth:"xl",sx:{py:4},children:e.jsxs(l,{container:!0,spacing:4,children:[e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(w,{variant:"rectangular",height:500})}),e.jsxs(l,{item:!0,xs:12,md:6,children:[e.jsx(w,{variant:"text",height:60}),e.jsx(w,{variant:"text",height:40,width:"60%"}),e.jsx(w,{variant:"text",height:100}),e.jsx(w,{variant:"rectangular",height:50,sx:{mt:2}})]})]})}):h||!r?e.jsxs(B,{maxWidth:"xl",sx:{py:4},children:[e.jsx(de,{severity:"error",sx:{mb:2},children:h||"Product not found"}),e.jsx(b,{startIcon:e.jsx(N,{}),onClick:()=>c("/products"),children:"Back to Products"})]}):e.jsxs(B,{maxWidth:"xl",sx:{py:4},children:[e.jsxs(xe,{sx:{mb:3},children:[e.jsx(A,{component:"button",variant:"body2",onClick:()=>c("/"),sx:{textDecoration:"none"},children:"Home"}),e.jsx(A,{component:"button",variant:"body2",onClick:()=>c("/products"),sx:{textDecoration:"none"},children:"Products"}),e.jsx(A,{component:"button",variant:"body2",onClick:()=>c(`/category/${r.category}`),sx:{textDecoration:"none",textTransform:"capitalize"},children:r.category}),e.jsx(a,{variant:"body2",color:"text.primary",children:r.title})]}),e.jsx(b,{startIcon:e.jsx(N,{}),onClick:()=>c(-1),sx:{mb:3},children:"Back"}),e.jsxs(l,{container:!0,spacing:4,children:[e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(z,{children:e.jsxs(n,{sx:{display:"flex",justifyContent:"center",alignItems:"center",p:6,minHeight:500,position:"relative"},children:[e.jsx(n,{component:"img",src:r.image,alt:r.title,sx:{maxWidth:"100%",maxHeight:450,objectFit:"contain"}}),e.jsx(S,{sx:{position:"absolute",top:16,right:16,bgcolor:"background.paper","&:hover":{bgcolor:"background.paper"}},onClick:()=>C(!v),children:v?e.jsx(H,{color:"error"}):e.jsx(q,{})})]})})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsxs(n,{children:[e.jsx(D,{label:r.category,sx:{mb:2,textTransform:"capitalize"}}),e.jsx(a,{variant:"h4",fontWeight:700,gutterBottom:!0,children:r.title}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[e.jsx(Q,{value:r.rating.rate,precision:.1,readOnly:!0}),e.jsxs(a,{variant:"body2",color:"text.secondary",children:["(",r.rating.count," reviews)"]})]}),e.jsx(a,{variant:"h3",color:"primary",fontWeight:700,sx:{mb:3},children:K(r.price)}),e.jsx($,{sx:{my:3}}),e.jsx(a,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"Description"}),e.jsx(a,{variant:"body1",color:"text.secondary",paragraph:!0,children:r.description}),e.jsx($,{sx:{my:3}}),e.jsxs(n,{sx:{mb:3},children:[e.jsx(a,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Quantity"}),e.jsx(n,{sx:{display:"flex",alignItems:"center",gap:2},children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(S,{onClick:()=>f(j-1),disabled:j<=1,size:"small",children:e.jsx(he,{})}),e.jsx(ue,{value:j,onChange:o=>{const W=parseInt(o.target.value);isNaN(W)||f(W)},size:"small",sx:{width:80},inputProps:{style:{textAlign:"center"}}}),e.jsx(S,{onClick:()=>f(j+1),size:"small",children:e.jsx(me,{})})]})})]}),e.jsxs(n,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(b,{variant:"contained",size:"large",startIcon:e.jsx(Z,{}),onClick:I,disabled:m(r.id),sx:{flex:1,minWidth:200},children:m(r.id)?"Already in Cart":"Add to Cart"}),e.jsx(b,{variant:"outlined",size:"large",onClick:()=>c("/cart"),children:"View Cart"})]}),e.jsx(n,{sx:{mt:3},children:e.jsx(z,{variant:"outlined",children:e.jsxs(G,{children:[e.jsxs(a,{variant:"body2",gutterBottom:!0,children:[e.jsx("strong",{children:"Free shipping"})," on orders over $50"]}),e.jsxs(a,{variant:"body2",gutterBottom:!0,children:[e.jsx("strong",{children:"Easy returns"})," within 30 days"]}),e.jsxs(a,{variant:"body2",children:[e.jsx("strong",{children:"Secure checkout"})," guaranteed"]})]})})})]})})]}),k.length>0&&e.jsxs(n,{sx:{mt:8},children:[e.jsx(a,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"Related Products"}),e.jsx(l,{container:!0,spacing:3,sx:{mt:2},children:k.map(o=>e.jsx(l,{item:!0,xs:12,sm:6,md:3,children:e.jsx(R,{product:o})},o.id))})]})]})},Fe=Object.freeze(Object.defineProperty({__proto__:null,ProductDetailPage:Ce},Symbol.toStringTag,{value:"Module"}));export{R as P,We as a,Fe as b};
