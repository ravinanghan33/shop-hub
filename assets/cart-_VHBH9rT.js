import{j as t,B as l,a1 as I,T as i,q as m,N as f,a2 as B,l as E,E as P,Q as F,Z as T,J as A,a3 as W,a4 as b,a5 as _,G as v,g as S,C as R,a as q}from"./ui-vendor-Ci4yzqLt.js";import{a as C,u as D}from"./react-vendor-Ch971XjU.js";import{g as G,s as O,f as j}from"./admin-CwDw5-Mt.js";const w=C.createContext(void 0),k="shopping-cart",Z=({children:e})=>{const[r,o]=C.useState(()=>G(k,[]));C.useEffect(()=>{O(k,r)},[r]);const n=(a,c=1)=>{o(u=>u.find(p=>p.product.id===a.id)?u.map(p=>p.product.id===a.id?{...p,quantity:p.quantity+c}:p):[...u,{product:a,quantity:c}])},s=a=>{o(c=>c.filter(u=>u.product.id!==a))},h=(a,c)=>{if(c<=0){s(a);return}o(u=>u.map(y=>y.product.id===a?{...y,quantity:c}:y))},d=()=>{o([])},x=()=>r.reduce((a,c)=>a+c.product.price*c.quantity,0),g=()=>r.reduce((a,c)=>a+c.quantity,0),z=a=>r.some(c=>c.product.id===a);return t.jsx(w.Provider,{value:{items:r,addToCart:n,removeFromCart:s,updateQuantity:h,clearCart:d,getCartTotal:x,getItemCount:g,isInCart:z},children:e})},Q=()=>{const e=C.useContext(w);if(!e)throw new Error("useCart must be used within a CartProvider");return e},N=({icon:e,title:r,description:o,actionLabel:n,onAction:s})=>t.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:8,px:2,textAlign:"center"},children:[t.jsx(l,{sx:{fontSize:80,color:"text.secondary",mb:2,opacity:.5},children:e||t.jsx(I,{fontSize:"inherit"})}),t.jsx(i,{variant:"h5",gutterBottom:!0,fontWeight:600,children:r}),o&&t.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:3,maxWidth:400},children:o}),n&&s&&t.jsx(m,{variant:"contained",size:"large",onClick:s,children:n})]}),Y=({item:e,onUpdateQuantity:r,onRemove:o})=>{const{product:n,quantity:s}=e,h=n.price*s,d=x=>{x<=0?o(n.id):r(n.id,x)};return t.jsxs(t.Fragment,{children:[t.jsxs(l,{sx:{display:"flex",gap:2,py:2},children:[t.jsx(l,{component:"img",src:n.image,alt:n.title,sx:{width:80,height:80,objectFit:"contain",borderRadius:1,border:"1px solid",borderColor:"divider"}}),t.jsxs(l,{sx:{flexGrow:1,minWidth:0},children:[t.jsx(i,{variant:"h6",sx:{mb:1},children:n.title}),t.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:1},children:j(n.price)}),t.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(f,{size:"small",onClick:()=>d(s-1),disabled:s<=1,children:t.jsx(B,{})}),t.jsx(E,{size:"small",type:"number",value:s,onChange:x=>d(parseInt(x.target.value)||0),inputProps:{min:1,style:{textAlign:"center"}},sx:{width:60}}),t.jsx(f,{size:"small",onClick:()=>d(s+1),children:t.jsx(P,{})})]})]}),t.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:1},children:[t.jsx(i,{variant:"h6",color:"primary",children:j(h)}),t.jsx(f,{color:"error",onClick:()=>o(n.id),size:"small",children:t.jsx(F,{})})]})]}),t.jsx(T,{})]})},$=({subtotal:e,shippingThreshold:r=50,onCheckout:o,isLoading:n=!1})=>{const s=e>=r?0:9.99,h=e+s,d=r-e;return t.jsxs(l,{children:[t.jsx(i,{variant:"h6",sx:{mb:2},children:"Order Summary"}),t.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[t.jsx(i,{children:"Subtotal"}),t.jsx(i,{children:j(e)})]}),t.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[t.jsx(i,{children:"Shipping"}),t.jsx(i,{children:s===0?"Free":j(s)})]}),d>0&&t.jsxs(A,{severity:"info",sx:{mb:2},children:["Add ",j(d)," more for free shipping!"]}),t.jsx(T,{sx:{my:2}}),t.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[t.jsx(i,{variant:"h6",children:"Total"}),t.jsx(i,{variant:"h6",color:"primary",children:j(h)})]}),t.jsx(m,{variant:"contained",fullWidth:!0,size:"large",onClick:o,disabled:n||e===0,startIcon:t.jsx(W,{}),children:n?"Processing...":"Checkout"})]})},J=()=>{const e=D(),{items:r,removeFromCart:o,updateQuantity:n,getCartTotal:s,clearCart:h}=Q(),d=s(),x=()=>{console.log("Proceeding to checkout...")};return r.length===0?t.jsx(b,{maxWidth:"xl",sx:{py:8},children:t.jsx(N,{icon:t.jsx(I,{fontSize:"inherit"}),title:"Your cart is empty",description:"Looks like you haven't added any products to your cart yet.",actionLabel:"Continue Shopping",onAction:()=>e("/products")})}):t.jsxs(b,{maxWidth:"xl",sx:{py:4},children:[t.jsx(m,{startIcon:t.jsx(_,{}),onClick:()=>e("/products"),sx:{mb:3},children:"Continue Shopping"}),t.jsx(i,{variant:"h4",fontWeight:700,gutterBottom:!0,children:"Shopping Cart"}),t.jsxs(i,{variant:"body1",color:"text.secondary",sx:{mb:4},children:[r.length," ",r.length===1?"item":"items"," in your cart"]}),t.jsxs(v,{container:!0,spacing:3,children:[t.jsx(v,{item:!0,xs:12,md:8,children:t.jsxs(S,{sx:{p:2},children:[r.map(g=>t.jsx(Y,{item:g,onUpdateQuantity:n,onRemove:o},g.product.id)),t.jsx(l,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:t.jsx(m,{variant:"outlined",color:"error",onClick:h,children:"Clear Cart"})})]})}),t.jsx(v,{item:!0,xs:12,md:4,children:t.jsxs(S,{sx:{p:3,position:"sticky",top:80},children:[t.jsx($,{subtotal:d,shippingThreshold:50,onCheckout:x}),t.jsx(m,{variant:"outlined",fullWidth:!0,onClick:()=>e("/products"),sx:{mt:2},children:"Continue Shopping"}),t.jsx(R,{variant:"outlined",sx:{mt:3},children:t.jsxs(q,{children:[t.jsxs(i,{variant:"body2",gutterBottom:!0,children:[t.jsx("strong",{children:"Free shipping"})," on orders over $50"]}),t.jsxs(i,{variant:"body2",gutterBottom:!0,children:[t.jsx("strong",{children:"Secure checkout"})," guaranteed"]}),t.jsxs(i,{variant:"body2",children:[t.jsx("strong",{children:"Easy returns"})," within 30 days"]})]})})]})})]})]})},H=Object.freeze(Object.defineProperty({__proto__:null,CartPage:J},Symbol.toStringTag,{value:"Module"}));export{Z as C,N as E,H as a,Q as u};
